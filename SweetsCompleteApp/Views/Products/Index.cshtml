@model IList<SweetsCompleteApp.product>

@{
    ViewBag.Title = "Products";
    
    var itemsPerPage = 6;
    var x = 0;
    var j = 1;



    string url = HttpContext.Current.Request.Url.AbsoluteUri;
    string fixedurl = Request.RawUrl.Split(new[] { '?' })[0];
    string newParam = Request.Params["page"] ?? "0";
    int getPageNum = Convert.ToInt32(newParam);
    if(getPageNum == 0)
    {
        itemsPerPage = 6;
    }
    else if(getPageNum >= 1)
    {
        itemsPerPage = 6 * (getPageNum + 1); 
    }

    if (IsPost)
    {
        Response.Redirect(fixedurl + "?page=" + (getPageNum + 1));
    }
}

<h2>Our Products</h2>
    <div class="container">
        
        <form method="post">
            <button class="btn btn-success" type="submit" name="next"> Next </button>
            <ul style="list-style-type: none; width:80%; margin-left: 20%;">
                @{ 
                x = getPageNum * 6;
                }
                    
                @for (int i = x; i < @itemsPerPage; i++)
                {

                    <li style="display: inline-block;">
                        <div class="container" style="width: 300px">

                            <img src="~/Content/Images_fixed/@(Model[i].link).scale_20.jpg" width=" 190" height="130" />
                            <p>
                                @Html.DisplayFor(m => m[i].title)
                            </p>
                            <p>
                                @Html.DisplayFor(m => m[i].price)
                            </p>
                        </div>
                    </li>
                }

            </ul>
        </form>
    </div>



